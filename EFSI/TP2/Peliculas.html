<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="es">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Sufee Admin - HTML5 Admin Template</title>
    <meta name="description" content="Sufee Admin - HTML5 Admin Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="apple-icon.png">
    <link rel="shortcut icon" href="favicon.ico">

    <link rel="stylesheet" href="vendors/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="vendors/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="vendors/themify-icons/css/themify-icons.css">
    <link rel="stylesheet" href="vendors/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" href="vendors/selectFX/css/cs-skin-elastic.css">
    <link rel="stylesheet" href="vendors/jqvmap/dist/jqvmap.min.css">


    <link rel="stylesheet" href="assets/css/style.css">

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>

</head>

<body>


    <!-- Left Panel -->

    <aside id="left-panel" class="left-panel">
        <nav class="navbar navbar-expand-sm navbar-default">

            <div class="navbar-header">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu"
                    aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="./Admin.html"><span>5° info A</span></a>
                <a class="navbar-brand hidden" href="./"><img src="images/logo2.png" alt="Logo"></a>
            </div>

            <div id="main-menu" class="main-menu collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="Admin.html"> <i class="menu-icon fa fa-dashboard"></i>Dashboard </a>
                    </li>
                    <h3 class="menu-title">Administrador</h3><!-- /.menu-title -->

                    <li>
                        <a href="tables-data.html"> <i class="menu-icon fa fa-table"></i>Materias</a>
                    </li>
                    <li>
                        <a href="Consultas.html"> <i class="menu-icon ti-email"></i>Consultas </a>
                    </li>
                    <li>
                        <a href="TablaAnimes.html"> <i class="menu-icon fa fa-th"></i>Animes XQ se me pinto xd </a>
                    </li>
                    <li>
                        <a href="Personas.html"> <i class="menu-icon fa fa-glass"></i>Personas</a>
                    </li>
                    <li>
                        <a href="Peliculas.html"> <i class="menu-icon fa fa-bar-chart"></i>Películas</a>
                    </li>
            </div><!-- /.navbar-collapse -->
        </nav>
    </aside><!-- /#left-panel -->

    <!-- Left Panel -->

    <!-- Right Panel -->

    <div id="right-panel" class="right-panel">

        <div class="breadcrumbs">
            <div class="col-sm-4">
                <div class="page-header float-left">
                    <div class="page-title">
                        <h1>Dashboard</h1>
                    </div>
                </div>
            </div>
            <div class="col-sm-8">
                <div class="page-header float-right">
                    <div class="page-title">
                        <ol class="breadcrumb text-right">
                            <li class="active">Dashboard</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                    <strong class="card-title float-left">Buscar Peliculas</strong>
                <input type="text" id="buscar" class="form-control mr-4 ml-3" style="width: 15%; float:left;">
                
                <button id="btnBuscar" class="btn-primary ml-4" placeholder="titulo">Buscar</button>
                <small class="ml-5">//Flecha podes usar enter en vez del boton (es un comentario no comentado xddd)</small>
            </div>
            <div class="card-body">

                <table class="table table-striped table-bordered" id="tabla">
                    <thead>
                        <tr>
                            <th scope="col">Titulo</th>
                            <th scope="col">Año</th>
                            <th scope="col">Tipo</th>
                            <th scope="col">Imagen</th>
                        </tr>
                    </thead>
                    <tbody id="tablatbody">

                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <!--{"Title":"JoJo's Bizarre Adventure","Year":"2012–","Rated":"TV-MA","Released":"01 Oct 2012","Runtime":"30 min","Genre":"Animation, Action, Adventure, Fantasy, Horror, Thriller","Director":"N/A","Writer":"N/A","Actors":"Matthew Mercer, Daisuke Ono, Unshô Ishizuka, Tôru Ohkawa","Plot":"The story of the Joestar family, who are possessed with intense psychic strength, and the adventures each member encounters throughout their lives.","Language":"Japanese","Country":"Japan","Awards":"2 nominations.","Poster":"https://m.media-amazon.com/images/M/MV5BMDRkMGJhYTQtZjBmNy00Mjk4LWE2MTQtZmU3Y2M0YzM0N2E0XkEyXkFqcGdeQXVyNjc3OTE4Nzk@._V1_SX300.jpg","Ratings":[{"Source":"Internet Movie Database","Value":"8.3/10"}],"Metascore":"N/A","imdbRating":"8.3","imdbVotes":"3,503","imdbID":"tt2359704","Type":"series","totalSeasons":"5","Response":"True"}-->
    <div class="modal fade" id="moreInfo" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle">Titulo</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ul class="table list-unstyled">
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Poster <br/>
                                <img id="modalPoster" src="" alt="uh no hay poster xd"/>
                            </span>
                        </li>
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Plot <br/> <span id="modalPlot"></span></span>
                        </li> 
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Type <span id="modalType" class="badge badge-primary float-right"></span></span>
                        </li>  
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Genres <span id="modalGenres" class="badge badge-pill badge-primary float-right"></span></span>
                        </li>  
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Year <span id="modalYear" class="badge badge-pill badge-warning float-right"></span></span>
                        </li>
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Rated <span id="modalRated" class="badge badge-pill  badge-success float-right"></span></span>
                        </li>
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Release <span id="modalRelease" class="badge badge-info float-right"></span></span>
                        </li>    
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Runtime <span id="modalRuntime" class="badge badge-pill badge-info float-right"></span></span>
                        </li>   
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Actors<br/> <span id="modalActors"></span></span>
                        </li>     
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Rating <span id="modalRating" class="badge badge-pill badge-info float-right"></span></span>
                        </li>     
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Seasons <span id="modalSeasons" class="badge badge-pill badge-warning float-right"></span></span>
                        </li>    
                        <li class="list-group-item" style="padding-bottom: 5%">
                            <span>Country <span id="modalCountry" class="badge badge-secondary float-right"></span></span>
                        </li>      
                    </ul>                    
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secundary" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Panel -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="vendors/jquery/dist/jquery.min.js"></script>
    <script src="vendors/popper.js/dist/umd/popper.min.js"></script>
    <script src="vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="vendors/chart.js/dist/Chart.bundle.min.js"></script>
    <script src="assets/js/dashboard.js"></script>
    <script src="vendors/jqvmap/dist/jquery.vmap.min.js"></script>
    <script src="vendors/jqvmap/examples/js/jquery.vmap.sampledata.js"></script>
    <script src="vendors/jqvmap/dist/maps/jquery.vmap.world.js"></script>

    <script>
        $(document).ready(function () {
            var Titulo;
            $("#btnBuscar").click(BuscarPeliculas);
            $('#buscar').keypress(function (event) {

                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == '13') {
                    BuscarPeliculas();
                }
            });

            function BuscarPeliculas() {
                $("#tabla > tbody").html("");
                Titulo = $("#buscar").val();
                var sURL = "http://www.omdbapi.com/?s=" + Titulo + "&apikey=fd49f4bc";
                var container = $('#container');

                $.ajax({
                    method: 'GET',
                    url: sURL,
                    success: function (results) {

                        var Peliculas = results.Search;
                        try {


                            if (Peliculas.length == 0) {
                                alert("No se encontraron Peliculas");
                                console.log('hola');
                            }
                            for (var i = 0; i <= Peliculas.length - 1; i++) {
                                Peliculas[i].Search
                                var curMovieString = '<tr class="movieRow" data-toggle="modal" data-target="#moreInfo"><td class="title">' + Peliculas[i].Title + '</td>' + '<td class="year">' + Peliculas[i].Year + '</td>' + '<td class="type">' + Peliculas[i].Type + '</td>' + '<td class="poster"> <img class="w-25" src=' + Peliculas[i].Poster + '/></td></tr>';
                                $("tbody").append(curMovieString);
                            }
                            $(".movieRow").click(function(e){
                                BuscarMasInfo(e.currentTarget.children[0].textContent)
                            });
                        }
                        catch{
                            alert("No se encuentra la pelicula");
                        }
                    },
                    error: function (error) {
                        alert("Error al buscar la pelicula");
                    }
                });
            }
            function BuscarMasInfo(Titulo){
                var sURL = "http://www.omdbapi.com/?t=" + Titulo + "&apikey=fd49f4bc";
                $.ajax({
                    method: 'GET',
                    url: sURL,
                    success: function(results){
                        $("#modalPoster").attr("src",results.Poster);
                        $("#modalTitle").text(results.Title);
                        $("#modalType").text(results.Type);
                        $("#modalGenres").text(results.Genre);
                        $("#modalYear").text(results.Year);
                        $("#modalRated").text(results.Rated);
                        $("#modalRelease").text(results.Released);
                        $("#modalRuntime").text(results.Runtime);
                        $("#modalActors").text(results.Actors);
                        $("#modalPlot").text(results.Plot);
                        $("#modalRating").text(results.imdbRating);
                        $("#modalSeasons").text(results.totalSeasons);
                        $("#modalCountry").text(results.Country);

                    },
                    
                    error: function (error) {
                        alert("Error al buscar la pelicula");
                    }

                });
            }
        });
    </script>


</body>

</html>